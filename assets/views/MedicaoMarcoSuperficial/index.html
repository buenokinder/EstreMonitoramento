<style>
    #marco-resumo table, #marco-resumo td, #marco-resumo tr, #marco-resumo th {
        font-size: 10px;
        border: solid 1px;
    }
</style>
<div class="section">
    <div class="row section">
        <div class="divider"></div>
        <div class="row">

            <div class="col s12 m12 l6">
                <grid-view fields="[{'name': 'data' , 'value': 'Data/Hora', type:'datetimepicker'},{'name': 'nomeTopografo' , 'value': 'Topógrafo','filter':'true' } , {'name': 'aterro' , 'value': 'Aterro', 'sub':'nome', 'type': 'combobox', 'combo':'true', 'text': 'aterro', 'api': 'Aterro', 'model': 'aterros',  'fieldid': 'id', 'fieldname': 'nome'},{'name': 'nomeAuxiliar' , 'value': 'Auxiliar','filter':'true' } ]" listaname="MedicaoMarcoSuperficial" autopage="true" adicionar="" add="false" update="true" strdelete="true" strupdate="false" popup="true" label="Lista de Medições" view="MedicaoMarcoSuperficial" calculatetitle="Resumos" pagesize="5" editinline="false" calculate="true" updateperfil="[{'perfil':'Gerente'}, {'perfil':'Administrador'}, {'perfil':'Diretor'}]" deleteperfil="[{'perfil':'Administrador'}, {'perfil':'Diretor'}]"></grid-view>
                <button class="btn btn-large  ng-scope" aria-hidden="false" id="btMonitoramentos">Monitoramentos</button>
            </div>

            <div class="col s12 m12 l6">

                <div id="modalView" class="modal modal-fixed-footer">
                    <div class="modal-content">
                        <h4>Nova Medição</h4>

                        <form editable-form="" name="editableForm" class="ng-pristine ng-scope ng-invalid ng-invalid-date">
                            <p>
                                <b>Data/Hora: </b>
                                <span class="editable-wrap editable-text ng-scope">
                                    <div class="editable-controls form-group" ng-class="{'has-error': $error}">
                                        <input type="text" name="data" ng-model="inserted.data" class=" datetimepicker editable-input form-control ng-pristine ng-valid ng-not-empty ng-touched" aria-invalid="false">


                                        <div class="editable-error help-block ng-binding ng-hide" ng-show="$error" ng-bind="$error" aria-hidden="true"></div>
                                    </div>
                                </span>

                            </p>

                            <p>
                                <b>Topógrafo: </b>

                                <span class="editable-wrap editable-text ng-scope">
                                    <div class="editable-controls form-group" ng-class="{'has-error': $error}">
                                        <input type="text" name="nomeTopografo" ng-model="inserted.nomeTopografo" class="editable-input form-control ng-pristine ng-valid ng-not-empty ng-touched" aria-invalid="false">

                                        <div class="editable-error help-block ng-binding ng-hide" ng-show="$error" ng-bind="$error" aria-hidden="true"></div>
                                    </div>
                                </span>
                            </p>

                            <p>
                                <b>Auxiliar: </b>

                                <span class="editable-wrap editable-text ng-scope">
                                    <div class="editable-controls form-group" ng-class="{'has-error': $error}">
                                        <input type="text" name="nomeAuxiliar" ng-model="inserted.nomeAuxiliar" class="editable-input form-control ng-pristine ng-valid ng-not-empty ng-touched" aria-invalid="false">

                                        <div class="editable-error help-block ng-binding ng-hide" ng-show="$error" ng-bind="$error" aria-hidden="true"></div>
                                    </div>
                                </span>
                            </p>


                            <p>
                                <b>Temperatura: </b>

                                <span class="editable-wrap editable-text ng-scope">
                                    <div class="editable-controls form-group" ng-class="{'has-error': $error}">
                                        <input type="text" name="temperatura" ng-model="inserted.temperatura" ui-number-mask='1' class="editable-input form-control ng-pristine ng-valid ng-not-empty ng-touched" aria-invalid="false">

                                        <div class="editable-error help-block ng-binding ng-hide" ng-show="$error" ng-bind="$error" aria-hidden="true"></div>
                                    </div>
                                </span>
                            </p>
                            <p ng-show="perfil=='Administrador'">
                                <b>Aterro: </b>
                                <div class="form-group" id="sign-up-form">
                                
                                    <select class="browser-default active ng-pristine ng-empty ng-invalid ng-invalid-required ng-touched" id="aterro" required="" ng-model="inserted.aterro" ng-options="x.id as x.nome for x in aterros" aria-invalid="true">
                                        <!-- <option value="?" selected="selected"></option> -->
                                    </select>
                                </div>
                            </p>

                            <p ng-show="perfil=='Gerente'">
                                <b>Observação do Gestor: </b>
                                <span class="editable-wrap editable-text ng-scope">
                                    <div class="editable-controls form-group" ng-class="{'has-error': $error}" ng-show="perfil=='Gerente'">
                                        <input type="text" name="obsGestor" ng-model="inserted.obsGestor" class="editable-input form-control ng-pristine ng-valid ng-not-empty ng-touched" aria-invalid="false">

                                        <div class="editable-error help-block ng-binding ng-hide" ng-show="$error" ng-bind="$error" aria-hidden="true"></div>
                                    </div>
                                </span>
                            </p>


                            <div class="buttons">
                                <button type="button" class="btn btn-default ng-hide">Adicionar</button>

                                <span class="">
                                    <button type="submit" class="btn btn-primary" style="margin-right:10px;" ng-click="addMedicao()">Salvar</button>

                                    <button type="button" class="btn btn-default" onclick="fecharModal('modalView')">Cancelar</button>
                                </span>
                            </div>
                        </form>
                    </div>
                </div>


                <div ng-controller="MedicaoMarcoSuperficialController" ng-show="verResumos" class="container">
                    <div class="card-panel ng-scope">
                        <div class="card-content black-text">
                            <div class="row" aria-hidden="false">
                                <div class="table-responsive col m12">
                                    <table class="table table-striped table-bordered table-hover table-condensed" id="marco-resumo">

                                        <thead>
                                            <tr>

                                                <th rowspan="3">MARCO SUPERFICIAL</th>
                                                <th rowspan="3">DATA</th>
                                                <th colspan="2">DESLOCAMENTOS</th>
                                                <th colspan="2">VELOCIDADE</th>
                                                <th rowspan="2" colspan="2">
                                                    CRITÉRIO DE ALERTA
                                                </th>
                                            </tr>

                                            <tr>
                                                <th style="text-align:center">Horizontal</th>
                                                <th style="text-align:center">Vertical</th>
                                                <th style="text-align:center">Horizontal</th>

                                                <th style="text-align:center">Vertical</th>
                                            </tr>

                                            <tr>
                                                <th style="text-align:center">Parcial (cm)</th>
                                                <th style="text-align:center">Parcial (cm)</th>
                                                <th style="text-align:center">(cm/dia)</th>
                                                <th style="text-align:center">(cm/dia)</th>
                                                <th>Horizontal</th>
                                                <th>Vertical</th>
                                            </tr>
                                        </thead>

                                        <tbody>
                                            <tr ng-repeat="monitoramento in monitoramentos.resumo" class="ng-scope">
                                                <td>{{monitoramento.marcoSuperficial}}</td>
                                                <td>{{monitoramento.data | date:'dd/MM/yyyy HH:mm'}}</td>
                                                <td>{{monitoramento.deslocamentoHorizontalParcial}}</td>
                                                <td>{{monitoramento.deslocamentoVerticalParcial}}</td>
                                                <td>{{monitoramento.velocidadeHorizontal}}</td>
                                                <td>{{monitoramento.velocidadeVertical}}</td>
                                                <td class='{{getCssClass(monitoramento.criterioAlertaHorizontalMetodologia1)}}'>{{monitoramento.criterioAlertaHorizontalMetodologia1}}</td>
                                                <td class='{{getCssClass(monitoramento.criterioAlertaVerticalMetodologia1)}}'>{{monitoramento.criterioAlertaVerticalMetodologia1}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                        </div>
                    </div>


                </div>

                <div ng-controller="MedicaoMarcoSuperficialController" ng-show="verMedicoes" class="container">
                    <div class="card-panel ng-scope">
                        <div class="card-content black-text">
                            <p>Detalhes da Medição</p>
                            <edit-view fields="[{'name': 'data' , 'value': 'Data/Hora', 'type':'datetimepicker'},{'name': 'nomeTopografo' , 'value': 'Topógrafo' } ,{'name': 'nomeAuxiliar' , 'value': 'Auxiliar' },{'name': 'temperatura' , 'value': 'Temperatura' },{'name':'obsGestor', 'value':'Observação do Gestor', 'updateperfil':[{ 'perfil': 'Gerente'}] },{'name':'obsOperacional', 'value':'Observação do Operacional', 'readonly':true, 'updateperfil':[{ 'perfil': 'Operacional'}] }  ]" label="Formulário de Medições'" nocard="true" listaname="MedicaoMarcoSuperficial" strupdate="true" updateperfil="[{'perfil':'Gerente'}, {'perfil':'Administrador'}, {'perfil':'Diretor'}]"></edit-view>
                        </div>
                    </div>

                    <div class="card-panel ng-scope">

                        <a class="btn-floating btn-large waves-effect waves-light" ng-click="uploadDetalhes()" title="Inclusão automática via arquivo"><i class="mdi-file-cloud-upload"></i></a>

                        <div>
                            <grid-view fields="[{'name': 'nome' , 'value': 'Marco', 'readonly':true},{'name': 'norte' , 'value': 'Norte' } ,{'name': 'leste' , 'value': 'Leste' }  ,{'name': 'cota' , 'value': 'Cota' } ]" listaname="MedicaoMarcoSuperficialDetalhes" autopage="true" adicionar="" add="false" popup="false" strupdate="false" popup="true" label="Lista de Detalhes de Medições"
                                       view="MedicaoMarcoSuperficialDetalhes" parentkey="owner" pagesize="5" editinline="true" deleteperfil="[{ 'perfil': 'Administrador'}, { 'perfil': 'Diretor'}]" updateperfil=" [{ 'perfil': 'Administrador' }, { 'perfil': 'Diretor' }]" viewperfil="[{ 'perfil': 'Administrador'}, { 'perfil': 'Diretor'}, { 'perfil': 'Operacional'}]">
                            </grid-view>
                        </div>

                        <a class="btn-floating  btn-move-up waves-effect waves-light darken-2 right"
                           ng-click="addNewMapa()" ng-show="aterro.nome">
                            <i class="mdi-content-add"></i>
                        </a>


                        <div id="modalUpload" class="modal modal-fixed-footer">

                            <div class="modal-content">
                                <input type="file" class="dropify" data-height="300" on-read-file="showContent($fileContent)" />
                                <div ng-if="content">
                                    <h2>Marcos processado no arquivo:</h2>

                                    <table class='striped'>
                                        <thead>
                                            <tr>
                                                <th class='text-center ng-binding ng-scope'>Marco Superficial</th>
                                                <th class='text-center ng-binding ng-scope'>Norte</th>
                                                <th class='text-center ng-binding ng-scope'>Leste</th>
                                                <th class='text-center ng-binding ng-scope'>Cota</th>
                                            </tr>
                                        </thead>

                                        <tbody>
                                            <tr ng-repeat='medicao in medicoes'>
                                                <td class="ng-scope">{{medicao.nome}}</td>
                                                <td class="ng-scope">{{medicao.norte}}</td>
                                                <td class="ng-scope">{{medicao.leste}}</td>
                                                <td class="ng-scope">{{medicao.cota}}</td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <div class="row col-xs-12 col-md-6" ng-show="perfil=='Operacional'">
                                        <p><b>Observação do operacional:</b></p>
                                        <textarea ng-model="data.obsOperacional" class="form-group" rows="15" cols="40" style="margin: 0px; height: 85px; width: 714px;"></textarea>
                                        <button ng-click="saveObsOperacional()" type="submit" class="btn btn-primary" style="margin-right:10px;">Submeter</button>
                                    </div>

                                </div>

                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>